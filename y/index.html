<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./assets/dist/css/bootstrap.css" rel="stylesheet">
    <link rel="icon" href="sum.ico">
    <title>Expresiones Regulares</title>
</head>
<body>



<center>
<section id="columna"><br>

	<img src="pca.png"><br><br>

	<h1 style="font-size: 40px;">Aplicando Expresiones Regulares</h1>
	<br>

<form>
 <p><b>Por favor introduzca las Direcciones a Consultar</b></p>

<textarea name="textarea" id="textarea" name="textarea"cols="160" rows="5"></textarea>
 
<br><br>
<button type="button" class="btn btn-danger" onclick="verResultado()">Verificar</button></form>

</center>

</section>



<script type="text/javascript">
	function verResultado() {

    //capturo todas las direcciones
    valor=document.getElementById("textarea").value
    
    
    //separo en un array cada direccion
    var divisiones= valor.split("\n");
    console.log(divisiones);

        
    nroDirecciones=0;

    // para saber cuantas direcciones entraron
    divisiones.forEach(function(division, index) {
        nroDirecciones++;
        //alert(nroDirecciones);
    });

    

    //para validar ipv4 ESTE CORRECTA Y EMPIECE POR 191 O 192
     var regex_ipv4  = /((191|192)\.)(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){2}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/igm;


    //para validar ipv6 que sea correcta    
        var regex_ipv6 = /(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/igm;

    
        //para imprimir el valor DE LA IP V4
    //     if( regex_ipv4.test(valor) ) {
    //     document.getElementById("textarea2").value=valor;
    // } 


    //para validar que comienzan por Fe o Fb E IMPIRMIR EL VALOR DE LA IP V6
    // if( regex_ipv6.test(valor)) {

    //     if (valor[0]=="F"){

    //         if (valor[1]=="e" | valor[1]=="b"){

    //             document.getElementById("textarea2").value=valor;
    //         }

    //     }

        
    // } 

    // Para validar una fecha en formato YYYY-MM-DD HH:MM:SS
    var regex_fecha = /^(^[(](19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31) ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(AM|PM)[)])/igm;
    // if( regex_fecha.test(valor) ) {
    //     document.getElementById("textarea2").value=valor;
    // } 


    // Para validar el metodo get o post
     var regex_metodo = /(GET|POST)/igm;
    //  if( regex_metodo.test(valor) ) {
    //      document.getElementById("textarea2").value=valor;
    //  } 

    // Para validar la url
      var regex_url = /(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/igm;
    //   if( regex_url.test(valor) ) {
    //       document.getElementById("textarea2").value=valor;
    //   } 

        Detallefecha=regex_fecha.exec(valor);
        Detalleipv4=regex_ipv4.exec(valor);
        Detalleipv6=regex_ipv6.exec(valor);
        Detallemetodo=regex_metodo.exec(valor);
        Detalleurl=regex_url.exec(valor);

        const ExpRegularGeneral= /^(([(](19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31) ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(AM|PM)[)])-((191|192)\.)(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){2}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)-(GET|POST)-(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-]))?$|([(](19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31) ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(AM|PM)[)]-fe|[(](19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31) ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(AM|PM)[)]-fb)/igm;
        
        DireccionesNarnia=[];
        s=0;
        j=0
        g=0

        console.log(nroDirecciones.lenght);
        
        do {

            if(ExpRegularGeneral.test(divisiones[s])==true){

                console.log(s);
                console.log(ExpRegularGeneral.test(divisiones[s]));

                DireccionesNarnia[j]=divisiones[s];
                j=j+1;
                } 

                s=s+1;
                g=g+1;

        }while(g<=nroDirecciones);

            alert("se registraron :"+ nroDirecciones+" direcciones de las cuales se encontraron :"+j+ " direcciones que provienen del Reino de Narnia")

            DireccionesNarnia.forEach(function(narnia, index) {
                document.getElementById("textarea2").value=DireccionesNarnia;
                
            });
            console.log(s);
            
        
        //console.log(Detallefecha);
 
}

    </script>


    
<br>
<center> 
<h1 class="text-center" style="font-size: 40px;">direcciones que provienen del Reino Narnia</h1>
        
<textarea name="textarea2" id="textarea2" name="textarea2" cols="160" rows="6" disabled></textarea>

</center>


</body>
</html>
